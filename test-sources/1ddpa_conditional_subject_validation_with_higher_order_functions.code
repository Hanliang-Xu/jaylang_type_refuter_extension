# EXPECT-WELL-FORMED
# EXPECT-EVALUATE
# EXPECT-ANALYSIS-STACK-IS 1ddpa
# EXPECT-ANALYSIS-LOOKUP-FROM-END nopr {int}
# EXPECT-ANALYSIS-NO-INCONSISTENCIES

zero = 0;
f = fun g -> (
        nop0f = 0;
        gresult = g zero;
        nop1f = gresult;
        cond = gresult ~ int;
        fret = cond ? (gresultTret = 0) : (gresultFret = false);
        nop2f = fret;
    );
h1 = fun h1param -> ( h1ret = h1param );
h2 = fun h2param -> (
        nop0h2 = 0;
        h2ret = f h1;
        nop1h2 = h2ret;
    );
z = f h2;
nopr = z;
